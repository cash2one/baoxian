define("com/global/1.0.0:selects",["com/global/1.0.0:dollar","com/arale/1.2.0:widget"],function(e,t,l){var a=e("com/global/1.0.0:dollar"),n=e("com/arale/1.2.0:widget"),i=n.extend({attrs:{defaults:[],selectName:"select",selectNames:["province","city"]},events:{"change .atm-select":function(e){var t=a(e.target),l=t.data("level");this.initLevel(l)}},getUrl:a.noop,getName:function(e){var t=this.get("selectNames")||[],l=t[e-1];return"undefined"==typeof l&&(l=this.get("selectName")+e),l},addName:function(e){var t=this.getName(e);this.getSelect(e).attr("name",t)},getAjaxUrl:function(e){var t=this,l=t.getSelectValue(e),a=t.getUrl(e,l);return a?a:null},getSelect:function(e){return this.element.find('.atm-select[data-level="'+e+'"]')},getSelectValue:function(e){return 0===e?"":this.getSelect(e).val()},setValue:function(e,t){this.element.find('.atm-select[data-level="'+e+'"]').val(t)},removeAfter:function(e){var t=this;return t.element.find(".atm-select").each(function(){a(this).data("level")>e&&a(this).remove()}),this},getDefaultValue:function(e){var t=this.get("defaults")||[];if("undefined"==typeof t[e])return null;var l=t[e];return delete t[e],l},ajaxCallback:function(e,t){var l=this;l.removeAfter(e-1).createSelect(t,e);var a=l.getDefaultValue(e-1);null!==a&&(l.setValue(e,a),l.initLevel(e))},convertData:function(e,t){return t},createSelect:function(e,t){var l=this.getOptionHtml(t,e),n='<select class="atm-select" data-level="'+t+'">'+l+"</select>";1===t?a(n).prependTo(this.element):a(n).insertAfter('select[data-level="'+(t-1)+'"]'),this.addName(t)},getOptionHtml:function(e,t){t=this.convertData(e,t);for(var l=[],a=0,n=t.length;n>a;a++){var i=t[a];l.push('<option value="'+i[0]+'">'+i[1]+"</div>")}return l.join("")},initLevel:function(e){var t=this,l=t.getAjaxUrl(e);null!==l?a.getJSON(l,function(l){t.ajaxCallback(e+1,l)}):t.removeAfter(e)},setup:function(){this.initLevel(0)}});l.exports=i});